!function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.FormatNumber=e(t.React)}(window,function(t){"use strict";var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},n=function(t){return"undefined"==typeof t},r=function(t){return e(t)&&"[object Function]"===Object.prototype.toString.call(t)},i={DECIMAL_SEP:".",GROUP_SEP:",",PATTERN:{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3}},a=function(t,r){if(e(t))return"";var a=0>t;t=Math.abs(t);var o=t===1/0;if(!o&&!isFinite(t))return"";var c=t+"",u="",s=!1,f=[];if(o&&(u="âˆž"),!o&&-1!==c.indexOf("e")){var l=c.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>r+1?t=0:(u=c,s=!0)}if(o||s)r>0&&1>t&&(u=t.toFixed(r),t=parseFloat(u));else{var h=(c.split(i.DECIMAL_SEP)[1]||"").length;n(r)&&(r=Math.min(Math.max(i.PATTERN.minFrac,h),i.PATTERN.maxFrac)),t=+(Math.round(+(t.toString()+"e"+r)).toString()+"e"+-r);var p=(""+t).split(i.DECIMAL_SEP),g=p[0];p=p[1]||"";var d,v=0,m=i.PATTERN.lgSize,S=i.PATTERN.gSize;if(g.length>=m+S)for(v=g.length-m,d=0;v>d;d++)(v-d)%S===0&&0!==d&&(u+=i.GROUP_SEP),u+=g.charAt(d);for(d=v;d<g.length;d++)(g.length-d)%m===0&&0!==d&&(u+=i.GROUP_SEP),u+=g.charAt(d);for(;p.length<r;)p+="0";r&&"0"!==r&&(u+=i.DECIMAL_SEP+p.substr(0,r))}return 0===t&&(a=!1),f.push(a?i.PATTERN.negPre:i.PATTERN.posPre,u,a?i.PATTERN.negSuf:i.PATTERN.posSuf),f.join("")},o=function(t){return t?t.replace(/,/g,""):""},c=function(t,n,r){function i(){g&&clearTimeout(g),f&&clearTimeout(f),v=0,f=g=d=void 0}function a(e,n){n&&clearTimeout(n),f=g=d=void 0,e&&(v=Date.now(),l=t.apply(p,s),g||f||(s=p=void 0))}function o(){var t=n-(Date.now()-h);0>=t||t>n?a(d,f):g=setTimeout(o,t)}function c(){a(T,g)}function u(){if(s=arguments,h=Date.now(),p=this,d=T&&(g||!m),S===!1)var e=m&&!g;else{f||m||(v=h);var r=S-(h-v),i=0>=r||r>S;i?(f&&(f=clearTimeout(f)),v=h,l=t.apply(p,s)):f||(f=setTimeout(c,r))}return i&&g?g=clearTimeout(g):g||n===S||(g=setTimeout(o,n)),e&&(i=!0,l=t.apply(p,s)),!i||g||f||(s=p=void 0),l}var s,f,l,h,p,g,d,v=0,m=!1,S=!1,T=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n=0>n?0:+n||0,e(r)&&(m=!!r.leading,S="maxWait"in r&&Math.max(+r.maxWait||0,n),T="trailing"in r?!!r.trailing:T),u.cancel=i,u},u=function(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||0===t.selectionStart)&&(e=t.selectionStart);return e},s=function(t,e){if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus()},f=t.createClass({getInitialState:function(){return"undefined"==typeof this.props.value?{src:0,txt:""}:{src:this.props.value,txt:a(this.props.value,this.props.fractionSize)}},getDefaultProps:function(){return{fractionSize:0,placeholder:"",onChange:function(){}}},handleInput:function(t,e,n,i){if(isNaN(t))return this.setState({src:0/0}),void(r(i.onChange)&&i.onChange(0/0));i.fractionSize>0&&(t=Number(t.toFixed(i.fractionSize)));var o=a(t,i.fractionSize),c=u(n),f=o.length-(e.length-c);this.setState({src:t,txt:o},function(){s(n,f)}),r(i.onChange)&&i.onChange(t)},componentWillMount:function(){var t=this;this.bounceChange=c(function(e){var n=e.target.value,r=o(n),i=Number(r);t.handleInput(i,n,e.target,t.props)},500)},componentWillReceiveProps:function(e){this.handleInput(this.state.src,this.state.txt,t.findDOMNode(this.refs.userinput),e)},onChange:function(t){t.persist(),this.setState({txt:t.target.value}),this.bounceChange(t)},render:function(){return t.createElement("input",{type:"text",ref:"userinput",onChange:this.onChange,value:this.state.txt,placeholder:this.props.placeholder})}});return f});