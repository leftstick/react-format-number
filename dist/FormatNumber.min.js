!function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.FormatNumber=e(t.React)}(window,function(t){"use strict";var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},n=function(t){return"undefined"==typeof t},i=function(t){return e(t)&&"[object Function]"===Object.prototype.toString.call(t)},r={DECIMAL_SEP:".",GROUP_SEP:",",PATTERN:{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3}},o=function(t,i){if(e(t))return"";var o=0>t;t=Math.abs(t);var a=t===1/0;if(!a&&!isFinite(t))return"";var u=t+"",s="",c=!1,f=[];if(a&&(s="âˆž"),!a&&-1!==u.indexOf("e")){var l=u.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>i+1?t=0:(s=u,c=!0)}if(a||c)i>0&&1>t&&(s=t.toFixed(i),t=parseFloat(s));else{var p=(u.split(r.DECIMAL_SEP)[1]||"").length;n(i)&&(i=Math.min(Math.max(r.PATTERN.minFrac,p),r.PATTERN.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var h=(""+t).split(r.DECIMAL_SEP),g=h[0];h=h[1]||"";var m,v=0,S=r.PATTERN.lgSize,T=r.PATTERN.gSize;if(g.length>=S+T)for(v=g.length-S,m=0;v>m;m++)(v-m)%T===0&&0!==m&&(s+=r.GROUP_SEP),s+=g.charAt(m);for(m=v;m<g.length;m++)(g.length-m)%S===0&&0!==m&&(s+=r.GROUP_SEP),s+=g.charAt(m);for(;h.length<i;)h+="0";i&&"0"!==i&&(s+=r.DECIMAL_SEP+h.substr(0,i))}return 0===t&&(o=!1),f.push(o?r.PATTERN.negPre:r.PATTERN.posPre,s,o?r.PATTERN.negSuf:r.PATTERN.posSuf),f.join("")},a=function(t){return t?t.replace(/,/g,""):""},u=function(t,n,i){function r(){g&&clearTimeout(g),f&&clearTimeout(f),v=0,f=g=m=void 0}function o(e,n){n&&clearTimeout(n),f=g=m=void 0,e&&(v=Date.now(),l=t.apply(h,c),g||f||(c=h=void 0))}function a(){var t=n-(Date.now()-p);0>=t||t>n?o(m,f):g=setTimeout(a,t)}function u(){o(d,g)}function s(){if(c=arguments,p=Date.now(),h=this,m=d&&(g||!S),T===!1)var e=S&&!g;else{f||S||(v=p);var i=T-(p-v),r=0>=i||i>T;r?(f&&(f=clearTimeout(f)),v=p,l=t.apply(h,c)):f||(f=setTimeout(u,i))}return r&&g?g=clearTimeout(g):g||n===T||(g=setTimeout(a,n)),e&&(r=!0,l=t.apply(h,c)),!r||g||f||(c=h=void 0),l}var c,f,l,p,h,g,m,v=0,S=!1,T=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n=0>n?0:+n||0,e(i)&&(S=!!i.leading,T="maxWait"in i&&Math.max(+i.maxWait||0,n),d="trailing"in i?!!i.trailing:d),s.cancel=r,s},s=function(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||0===t.selectionStart)&&(e=t.selectionStart);return e},c=function(t,e){if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus()},f=t.createClass({propTypes:{value:t.PropTypes.string,fractionSize:t.PropTypes.number,onChange:t.PropTypes.func,style:t.PropTypes.object},getInitialState:function(){return{src:this.props.value,txt:o(this.props.value,this.props.fractionSize)}},getDefaultProps:function(){return{fractionSize:0,value:"0",onChange:function(){}}},handleInput:function(t,e,n,r){if(isNaN(t))return this.setState({src:NaN}),void(i(r.onChange)&&r.onChange(NaN));r.fractionSize>0&&(t=Number(t.toFixed(r.fractionSize)));var a=o(t,r.fractionSize),u=s(n),f=a.length-(e.length-u);this.setState({src:t,txt:a},function(){c(n,f)}),i(r.onChange)&&r.onChange(t)},componentWillMount:function(){var t=this;this.bounceChange=u(function(e){var n=e.target.value,i=a(n),r=Number(i);t.handleInput(r,n,e.target,t.props)},500)},componentDidMount:function(){this.handleInput(this.state.src,this.state.txt,t.findDOMNode(this.refs.userinput),this.props)},componentWillReceiveProps:function(e){this.handleInput(this.state.src,this.state.txt,t.findDOMNode(this.refs.userinput),e)},onChange:function(t){t.persist(),this.setState({txt:t.target.value}),this.bounceChange(t)},render:function(){return t.createElement("input",{type:"text",ref:"userinput",style:this.props.style,onChange:this.onChange,value:this.state.txt})}});return f});